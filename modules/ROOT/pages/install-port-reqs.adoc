= Network and Port Requirements for Anypoint Runtime Fabric
ifndef::env-site,env-github[]
include::_attributes.adoc[]
endif::[]

Runtime Fabric requires specifc network and port settings for installation and normal operations.

== Additional Ports Used During Installation

The following table lists the ports that must be accessible when installing Anypoint Runtime Fabric. After completing the installation, you can safely disable these ports.

[%header%autowidth.spread]
|===
| Port | Protocol | Direction | Usage
| 61008-61010 | TCP (HTTPS) | Internal | Used during installation
| 61022-61024 | TCP (HTTPS) | Internal | Installer agent ports
| 4242 | TCP | Internal | Bandwidth checker
|===

== Required Port Settings

The following sections list the TCP and UDP network port requirements for Anypoint Runtime Fabric.


=== TCP Ports

The following table lists the TCP ports that must be accessible:

[%header%autowidth.spread]
|===
| Port | Protocol | Direction | Usage
| 443 | TCP (HTTPS) | Outbound to Internet | Management services, API Manager policy updates, API Analytics Ingestion, and Resource retrieval (application files, container images).
| 443 | TCP (HTTPS) | Ingress | Inbound traffic to Mules
| 32009 | TCP (HTTPS) | Ingress | Runtime Fabric Ops Center
| 2379, 2380, 4001, 7001 | TCP | Internal | etcd distributed database
| 6060 | TCP | Internal | Health check
| 6443, 8080 | TCP | Internal | Kubernetes API server
| 30000-32767 | TCP | Internal | Internal services port range
| 10248-10250 | TCP | Internal | Kubernetes components
| 10255 | TCP | Internal | Kubernetes components
| 53 | TCP | Internal | Internal DNS
| 7496 | TCP | Internal  | Peer-to-peer connectivity
| 5000 | TCP | Internal | Docker registry
| 3022 - 3025 | TCP | Internal | Remote debugging services
| 3080 | TCP | Internal | Runtime Fabric internal Ops Center
| 3008 - 3012 | TCP | Internal | Runtime Fabric internal services
| 7575, 7373 | TCP | Internal | Runtime Fabric internal services
|===

=== UDP Ports

The following table lists the UDP ports that must be accessible to Runtime Fabric:

[%header%autowidth.spread]
|===
| Port | Protocol | Direction | Usage
| 53 | UDP | Internal | Internal DNS
| 8472 | UDP | Internal | Overlay networking
|===

== Port IPs and Hostnames to Whitelist

In your network configuration, you may need to whitelist the hostnames and ports of Anypoint Platform components and services to enable Anypoint Runtime Fabric to communicate with them. This is also required to download dependencies during installation and upgrades.

The following table lists the ports and hostnames to add to your whitelists to allow communication between Runtime Fabric and Anypoint Platform:

[%header%autowidth.spread]
|===
| Port | Protocol | Hostnames
.2+| 443 .2+| AMQP over WebSockets | US control plane: `transport-layer.prod.cloudhub.io`
| EU control plane: `transport-layer.prod-eu.msap.io`
| 443 | HTTPS | `*.prod.cloudhub.io`
| 443 | HTTPS | `anypoint.mulesoft.com`
| 443 | HTTPS | `*.anypoint.mulesoft.com`
.2+| 443 .2+| HTTPS | `worker-cloud-helm-prod.s3.amazonaws.com`
| EU control plane: `worker-cloud-helm-prod-eu-rt.s3.amazonaws.com` `worker-cloud-helm-prod-eu-rt.s3.eu-central-1.amazonaws.com`
.2+| 443 .2+| HTTPS | `exchange2-asset-manager-kprod.s3.amazonaws.com`
| EU control plane: `exchange2-asset-manager-kprod-eu.s3.amazonaws.com` `exchange2-asset-manager-kprod-eu.s3.eu-central-1.amazonaws.com`
.2+| 443 .2+| HTTPS | US control plane: `ecr.us-east-1.amazonaws.com`
| EU control plane: `ecr.eu-central-1.amazonaws.com`
.2+| 443 .2+| HTTPS | US control plane: `*.ecr.us-east-1.amazonaws.com`
| EU control plane: `*.ecr.eu-central-1.amazonaws.com`
.2+| 443 .2+| HTTPS | US control plane: `prod-us-east-1-starport-layer-bucket.s3.amazonaws.com`
| EU control plane: `prod-eu-central-1-starport-layer-bucket.s3.amazonaws.com` `prod-eu-central-1-starport-layer-bucket.s3.eu-central-1.amazonaws.com`
.2+| 443 .2+| HTTPS | US control plane: `runtime-fabric.s3.amazonaws.com`
| EU control plane: `runtime-fabric-eu.s3.amazonaws.com`
|===

== Required Network Settings

The network settings are required for Anypoint Runtime Fabric:

* A subnet with enough IP address allotable to add additional VMs to Runtime Fabric.
* Shell/SSH access to each VM used to install Runtime Fabric.

== See Also

* xref:install-sys-reqs.adoc[Verify System Requirements for Anypoint Runtime Fabric]
